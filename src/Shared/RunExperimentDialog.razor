@using Eklee.Reports.Client.Models
<RadzenStack>
    @if (ErrorMessage is not null)
    {
        <RadzenAlert AlertStyle="AlertStyle.Danger" Variant="Variant.Flat" Shade="Shade.Lighter">
            @ErrorMessage
        </RadzenAlert>
    }
    @if (IsSaving)
    {
        <RadzenAlert AlertStyle="AlertStyle.Info" Variant="Variant.Flat" Shade="Shade.Lighter">
            Queuing experiment run...
        </RadzenAlert>
    }
    <RadzenRow AlignItems="AlignItems.Center">
        <RadzenColumn Size="12" SizeMD="4">
            <RadzenLabel Text="Iteration" title="Iteration" />
        </RadzenColumn>
        <RadzenColumn Size="12" SizeMD="8">
            <RadzenNumeric Min=1 Max=8 Disabled=@IsSaving Style="width: 100%;" Name="Iteration" @bind-Value=@(model.Iterations) />
        </RadzenColumn>
    </RadzenRow>
    <RadzenRow AlignItems="AlignItems.Center">
        <RadzenColumn Size="12" SizeMD="4">
            <RadzenLabel Text="Max Tokens" title="Max Tokens" />
        </RadzenColumn>
        <RadzenColumn Size="12" SizeMD="8">
            <RadzenNumeric Placeholder="2048" Min=0 Max=2048 Disabled=@IsSaving Style="width: 100%;" Name="MaxTokens" @bind-Value=@(model.MaxTokens) />
        </RadzenColumn>
    </RadzenRow>
    <RadzenRow AlignItems="AlignItems.Center">
        <RadzenColumn Size="12" SizeMD="4">
            <RadzenLabel Text="Temperature" title="Temperature" />
        </RadzenColumn>
        <RadzenColumn Size="12" SizeMD="8">
            <RadzenNumeric Placeholder="0.0" Step="0.1" Disabled=@IsSaving Style="width: 100%;" Name="Temperature" @bind-Value=@(model.Temperature) />
        </RadzenColumn>
    </RadzenRow>
    <RadzenRow AlignItems="AlignItems.Center">
        <RadzenColumn Size="12" SizeMD="4">
            <RadzenLabel Text="TopP" title="TopP" />
        </RadzenColumn>
        <RadzenColumn Size="12" SizeMD="8">
            <RadzenNumeric Placeholder="0.0" Step="0.1" Disabled=@IsSaving Style="width: 100%;" Name="TopP" @bind-Value=@(model.TopP) />
        </RadzenColumn>
    </RadzenRow>
    <RadzenRow AlignItems="AlignItems.Center">
        <RadzenColumn Size="12" SizeMD="4">
            <RadzenLabel Text="System prompt" title="System prompt" />
        </RadzenColumn>
        <RadzenColumn Size="12" SizeMD="8">
            <RadzenTextArea Disabled=@IsSaving Style="width: 100%;" Name="System prompt" @bind-Value=@model.SystemPrompt />
        </RadzenColumn>
    </RadzenRow>
    <RadzenRow AlignItems="AlignItems.Center">
        <RadzenColumn Size="12" SizeMD="4">
            <RadzenLabel Text="User prompt" title="user prompt" />
        </RadzenColumn>
        <RadzenColumn Size="12" SizeMD="8">
            <RadzenTextArea Disabled=@IsSaving Style="width: 100%;" Name="User prompt" @bind-Value=@model.UserPrompt />
        </RadzenColumn>
    </RadzenRow>
    <RadzenRow AlignItems="AlignItems.Center">
        <RadzenColumn Size="12" SizeMD="4">
            <RadzenLabel Text="Dataset" />
        </RadzenColumn>
        <RadzenColumn Size="12" SizeMD="8">
            <RadzenDropDown TValue="Guid" @bind-Value="SelectedDataSetId" TextProperty="DisplayName" ValueProperty="Id" Data=@DataSets />
        </RadzenColumn>
    </RadzenRow>
    <RadzenRow AlignItems="AlignItems.Center">
        <RadzenColumn Size="12" SizeMD="4">
            <RadzenLabel Text="Model Id" />
        </RadzenColumn>
        <RadzenColumn Size="12" SizeMD="8">
            <RadzenDropDown @bind-Value="model.ModelId" Data=@ModelIds />
        </RadzenColumn>
    </RadzenRow>
    <RadzenRow Gap="2rem" Class="rz-p-0 rz-p-lg-4">
        <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Center" Gap="1rem" Class="rz-mt-8 rz-mb-4">
            <RadzenButton Disabled=@IsSaving ButtonStyle="ButtonStyle.Primary" Click=@(async()=>await SaveAsync()) Size="ButtonSize.Large" Icon="save" Text="Save" />
            <RadzenButton Disabled=@IsSaving ButtonStyle=ButtonStyle.Light Click=@Cancel Size="ButtonSize.Large" Text="Cancel" />
        </RadzenStack>
    </RadzenRow>
</RadzenStack>
